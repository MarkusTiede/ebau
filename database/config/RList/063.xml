<row>
  <table_name>r_list</table_name>
  <model_name>configuration.RList</model_name>
  <data>
    <resource_id type="int">63</resource_id>
    <query type="str">SELECT
  "INSTANCE"."INSTANCE_ID"   AS "INSTANCE_ID",
  "ANSWER_DOK_NR"."ANSWER"   AS "DOSSIER_NR",
  "FORM"."NAME"              AS "FORM",
  "LOCATION"."NAME"          AS "COMMUNITY",
  "USER"."USERNAME"          AS "USER",
  "APPLICANT_VIEW"."APPLICANT",
  (SELECT LISTAGG("NAME", ', ') WITHIN GROUP (ORDER BY "NAME")
    FROM INTENTIONS WHERE "INSTANCE_ID" = "INSTANCE"."INSTANCE_ID") AS "INTENT",
  CASE
    WHEN "ANSWER_STREET_BG"."ANSWER" IS NOT NULL THEN "ANSWER_STREET_BG"."ANSWER"
    WHEN "ANSWER_STREET_NP"."ANSWER" IS NOT NULL THEN "ANSWER_STREET_NP"."ANSWER"
  END AS "STREET",
  'done'    AS "STATE",
  GET_INST_STATE_DESCRIPTION('done')    AS "STATE_DESCRIPTION"
FROM
  "INSTANCE"
LEFT JOIN "APPLICANT_VIEW" ON (
  "INSTANCE"."INSTANCE_ID" = "APPLICANT_VIEW"."INSTANCE_ID"
)
JOIN
  "INSTANCE_LOCATION" ON (
    "INSTANCE"."INSTANCE_ID" = "INSTANCE_LOCATION"."INSTANCE_ID"
  )
JOIN
  "LOCATION" ON (
   "INSTANCE_LOCATION"."LOCATION_ID" = "LOCATION"."LOCATION_ID"
  )
JOIN
  FORM ON (
    "INSTANCE"."FORM_ID" = "FORM"."FORM_ID"
)
JOIN
  "USER" ON (
    "INSTANCE"."USER_ID" = "USER"."USER_ID"
)
JOIN "ANSWER" "ANSWER_DOK_NR" ON (
    "INSTANCE"."INSTANCE_ID" = "ANSWER_DOK_NR"."INSTANCE_ID"
)
LEFT JOIN "ANSWER_STREET_BG" ON (
    "INSTANCE"."INSTANCE_ID" = "ANSWER_STREET_BG"."INSTANCE_ID"
  )
LEFT JOIN "ANSWER_STREET_NP" ON (
    "INSTANCE"."INSTANCE_ID" = "ANSWER_STREET_NP"."INSTANCE_ID"
  )
JOIN
  "GROUP_LOCATION" ON (
     "GROUP_LOCATION"."GROUP_ID" = [GROUP_ID]
  )
WHERE
  "INSTANCE"."INSTANCE_STATE_ID" = GET_INST_STATE_ID_BY_NAME('done')
  AND
  "GROUP_LOCATION"."LOCATION_ID" = "INSTANCE_LOCATION"."LOCATION_ID"
ORDER BY DOSSIER_NR</query>
  </data>
</row>

