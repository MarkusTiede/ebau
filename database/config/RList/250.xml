<row>
  <table_name>R_LIST</table_name>
  <model_name>configuration.RList</model_name>
  <data>
    <RESOURCE_ID type="int">250</RESOURCE_ID>
    <QUERY type="str">SELECT
  "INSTANCE"."INSTANCE_ID"     AS "INSTANCE_ID",
  "FORM"."NAME"                AS "FORM",
  "LOCATION"."NAME"            AS "COMMUNITY",
  "USER"."USERNAME"            AS "USER",
  "APPLICANT_VIEW"."APPLICANT",
  (SELECT LISTAGG("NAME", ', ') WITHIN GROUP (ORDER BY "NAME")
    FROM INTENTIONS WHERE "INSTANCE_ID" = "INSTANCE"."INSTANCE_ID") AS "INTENT",
  CASE
    WHEN "ANSWER_STREET_BG"."ANSWER" IS NOT NULL THEN "ANSWER_STREET_BG"."ANSWER"
    WHEN "ANSWER_STREET_NP"."ANSWER" IS NOT NULL THEN "ANSWER_STREET_NP"."ANSWER"
  END AS "STREET",
  GET_INST_STATE_NAME_BY_ID("INSTANCE".INSTANCE_STATE_ID)   "STATE",
  GET_INST_STATE_DESCRIPTION(GET_INST_STATE_NAME_BY_ID(INSTANCE.INSTANCE_STATE_ID))    "STATE_DESCRIPTION"
FROM
  "INSTANCE"
JOIN
  "INSTANCE_LOCATION" ON (
    "INSTANCE"."INSTANCE_ID" = "INSTANCE_LOCATION"."INSTANCE_ID"
  )
JOIN
  "LOCATION" ON (
   "INSTANCE_LOCATION"."LOCATION_ID" = "LOCATION"."LOCATION_ID"
  )
JOIN
  FORM ON (
    "INSTANCE"."FORM_ID" = "FORM"."FORM_ID"
)
JOIN
  "USER" ON (
    "INSTANCE"."USER_ID" = "USER"."USER_ID"
)
LEFT JOIN "ANSWER_STREET_BG" ON (
    "INSTANCE"."INSTANCE_ID" = "ANSWER_STREET_BG"."INSTANCE_ID"
  )
LEFT JOIN "ANSWER_STREET_NP" ON (
    "INSTANCE"."INSTANCE_ID" = "ANSWER_STREET_NP"."INSTANCE_ID"
  )
JOIN
  "GROUP_LOCATION" ON (
    "GROUP_LOCATION"."GROUP_ID" = [GROUP_ID]
  )
LEFT JOIN "APPLICANT_VIEW" ON (
  "INSTANCE"."INSTANCE_ID" = "APPLICANT_VIEW"."INSTANCE_ID"
)

WHERE
  (
  "INSTANCE"."INSTANCE_STATE_ID" = GET_INST_STATE_ID_BY_NAME('subm')
  OR
  "INSTANCE"."INSTANCE_STATE_ID" = GET_INST_STATE_ID_BY_NAME('nfd')
  )
  AND
  "GROUP_LOCATION"."LOCATION_ID" = "INSTANCE_LOCATION"."LOCATION_ID"
</QUERY>
  </data>
</row>

